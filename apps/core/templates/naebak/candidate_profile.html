{% extends 'base.html' %}
{% load static %}

{% block title %}الملف الشخصي للمرشح{% endblock %}

{% block extra_css %}
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800&display=swap" rel="stylesheet">
<style>
    body {
        background-color: #f8f9fa;
        font-family: 'Tajawal', sans-serif;
        direction: rtl;
        text-align: right;
        color: #333;
    }
    .profile-page-container {
        max-width: 1100px;
        margin: 40px auto;
        background: white;
        border-radius: 20px;
        box-shadow: 0 15px 45px rgba(0,0,0,0.15);
        overflow: hidden;
        border: 1px solid #e0e0e0;
    }

    /* Header Section */
    .profile-header {
        position: relative;
        height: 350px;
        overflow: hidden;
        display: flex;
        align-items: flex-end;
        justify-content: space-between;
        padding: 30px 40px;
    }
    .profile-header .cover-image {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        filter: brightness(0.8);
    }
    .profile-header-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(to top, rgba(0,0,0,0.6) 0%, rgba(0,0,0,0) 50%);
        z-index: 1;
    }
    .profile-info-area {
        position: relative;
        z-index: 2;
        display: flex;
        align-items: center;
    }
    .profile-photo-lg {
        width: 160px;
        height: 160px;
        border-radius: 50%;
        border: 6px solid white;
        object-fit: cover;
        box-shadow: 0 8px 20px rgba(0,0,0,0.4);
        margin-left: 30px;
        transition: transform 0.3s ease-in-out;
    }
    .profile-photo-lg:hover {
        transform: scale(1.05);
    }
    .candidate-details-header {
        color: white;
        text-align: right;
    }
    .candidate-name-header {
        font-size: 2.8rem;
        font-weight: 800;
        margin-bottom: 5px;
        text-shadow: 2px 2px 5px rgba(0,0,0,0.5);
    }
    .candidate-role-header {
        font-size: 1.3rem;
        color: #e0e0e0;
        margin-bottom: 8px;
    }
    .candidate-location-header {
        font-size: 1.1rem;
        background: rgba(255,255,255,0.2);
        padding: 6px 15px;
        border-radius: 20px;
        display: inline-block;
    }

    /* Header Actions - Vertical Stack */
    .header-actions-left {
        position: relative;
        z-index: 2;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
        margin-right: 20px;
    }
    .social-icons-header-left {
        display: flex;
        gap: 15px;
        margin-bottom: 10px;
    }
    .social-icons-header-left a {
        color: white;
        font-size: 1.8rem;
        transition: color 0.3s ease, transform 0.3s ease;
    }
    .social-icons-header-left a:hover {
        color: #4CAF50;
        transform: translateY(-3px);
    }

    .btn-join-team {
        background: linear-gradient(45deg, #2196F3 0%, #1976D2 100%);
        color: white;
        padding: 12px 30px;
        border-radius: 30px;
        font-weight: bold;
        font-size: 1.1rem;
        transition: all 0.4s ease;
        box-shadow: 0 8px 25px rgba(33, 150, 243, 0.4);
        display: inline-flex;
        align-items: center;
        gap: 8px;
        text-decoration: none;
        border: 3px solid rgba(255,255,255,0.2);
        width: 200px;
        justify-content: center;
    }
    .btn-join-team:hover {
        transform: translateY(-3px);
        box-shadow: 0 15px 35px rgba(33, 150, 243, 0.6);
        background: linear-gradient(45deg, #1976D2 0%, #1565C0 100%);
        border-color: rgba(255,255,255,0.4);
        color: white;
        text-decoration: none;
    }
    .btn-chat-green {
        background: linear-gradient(45deg, #4CAF50 0%, #388E3C 100%);
        color: white;
        padding: 12px 30px;
        border-radius: 30px;
        font-weight: bold;
        font-size: 1.1rem;
        transition: all 0.4s ease;
        box-shadow: 0 8px 25px rgba(76, 175, 80, 0.4);
        display: inline-flex;
        align-items: center;
        gap: 8px;
        text-decoration: none;
        border: 3px solid rgba(255,255,255,0.2);
        width: 200px;
        justify-content: center;
    }
    .btn-chat-green:hover {
        transform: translateY(-3px);
        box-shadow: 0 15px 35px rgba(76, 175, 80, 0.6);
        background: linear-gradient(45deg, #388E3C 0%, #2E7D32 100%);
        border-color: rgba(255,255,255,0.4);
        color: white;
        text-decoration: none;
    }
    .btn-chat-green i, .btn-join-team i {
        font-size: 1.2rem;
    }

    /* Main Content Area */
    .profile-main-content {
        padding: 40px;
    }
    .content-card {
        background: white;
        border-radius: 15px;
        padding: 35px;
        margin-bottom: 30px;
        box-shadow: 0 8px 25px rgba(0,0,0,0.08);
        border: 1px solid #e0e0e0;
        transition: transform 0.3s ease-in-out;
    }
    .content-card:hover {
        transform: translateY(-5px);
    }
    .content-card h2 {
        font-size: 2.2rem;
        font-weight: 800;
        color: #4CAF50;
        margin-bottom: 25px;
        position: relative;
        text-align: center;
    }
    .content-card h2::after {
        content: "";
        position: absolute;
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        width: 70px;
        height: 4px;
        background: linear-gradient(90deg, #4CAF50, #81C784);
        border-radius: 2px;
    }
    .content-card h3 {
        font-size: 1.6rem;
        color: #666;
        margin-bottom: 20px;
        font-weight: bold;
    }
    .content-card p, .content-card ul {
        color: #555;
        line-height: 1.8;
        font-size: 1.05rem;
    }
    .content-card ul {
        list-style: none;
        padding-right: 0;
    }
    .content-card ul li {
        margin-bottom: 10px;
        position: relative;
        padding-right: 30px;
    }
    .content-card ul li::before {
        content: '\f00c';
        font-family: 'Font Awesome 5 Free';
        font-weight: 900;
        color: #4CAF50;
        position: absolute;
        right: 0;
        top: 3px;
    }

    /* Video Section */
    .video-section {
        position: relative;
        padding-bottom: 56.25%;
        height: 0;
        overflow: hidden;
        border-radius: 10px;
        margin-bottom: 25px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    .video-section iframe {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border: none;
    }

    /* Events Section - New Design V3 */
    .events-section-v3 {
        display: grid;
        grid-template-columns: 1fr;
        gap: 25px;
        padding: 20px 10px; /* Adjusted padding to give more space on sides */
    }
    .event-card-v3 {
        background: #ffffff;
        border-radius: 15px;
        box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        border: 1px solid #e0e0e0;
        transition: all 0.3s ease;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        max-width: 480px; /* Increased max-width to give more space for countdown */
        margin: 0 auto; /* Center the card */
    }
    .event-card-v3:hover {
        transform: translateY(-7px) scale(1.01);
        box-shadow: 0 12px 30px rgba(0,0,0,0.15);
    }
    .event-content-v3 {
        padding: 20px 15px; /* Increased horizontal padding for better spacing */
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }
    .event-title-v3 {
        font-size: 1.2rem; /* Reduced font size */
        font-weight: 800;
        color: #2c3e50;
        margin-bottom: 10px;
        text-align: center;
    }
    .event-meta-v3 {
        font-size: 1rem;
        color: #555;
        margin-bottom: 10px;
        text-align: center;
    }
    .event-meta-v3 i {
        color: #4CAF50;
        margin-left: 8px;
    }    .countdown-timer-v3 {
        display: flex;
        justify-content: space-between;
        gap: 8px; /* Added gap between items */
        margin-top: 15px;
        margin-bottom: 20px;
        padding: 0 15px; /* Added horizontal padding for better spacing */
        box-sizing: border-box;
        width: 100%;
        overflow-x: hidden;
    }
    .countdown-item-v3 {
        background-color: #4CAF50;
        color: white;
        padding: 12px 8px; /* Increased padding for better appearance */
        border-radius: 8px;
        text-align: center;
        box-shadow: 0 3px 8px rgba(0,0,0,0.15);
        flex: 1; /* Equal width for all items */
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        min-width: 0; /* Prevent flex items from overflowing */
    }
    .countdown-item-v3 .countdown-number {
        font-size: 1.2rem; /* Adjusted font size for numbers */
        font-weight: 900; /* Bold for numbers */
        display: block;
    }
    .countdown-item-v3 .countdown-label {
        font-size: 0.7rem; /* Adjusted font size for labels */
        font-weight: 400; /* Not bold for labels */
        display: block;
        color: rgba(255,255,255,0.9);
    }
    .btn-attend-v3 {
        background-color: #FFC107;
        color: #333;
        border: none;
        padding: 12px 30px;
        border-radius: 30px;
        font-size: 1.1rem;
        font-weight: bold;
        cursor: pointer;
        transition: background-color 0.3s ease, transform 0.3s ease;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        align-self: center;
        margin-top: auto;
    }
    .btn-attend-v3:hover {
        background-color: #e0a800;
        transform: translateY(-2px);
    }

    /* Rating Section */
    .rating-section {
        background-color: #e8f5e9;
        padding: 40px;
        text-align: center;
        border-radius: 15px;
        margin-top: 30px;
        box-shadow: inset 0 0 20px rgba(0,0,0,0.08);
    }
    .rating-section h2 {
        color: #4CAF50;
        font-size: 2.5rem;
        margin-bottom: 25px;
    }
    .rating-section .stars {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 5px;
        margin-bottom: 15px;
    }
    .rating-section .stars i {
        font-size: 1.5rem;
        color: #FFC107;
        cursor: pointer;
        transition: all 0.3s ease;
        text-shadow: 0 0 8px rgba(255,193,7,0.4);
    }
    .rating-section .stars i:hover,
    .rating-section .stars i.selected {
        transform: scale(1.1);
        text-shadow: 0 0 15px rgba(255,193,7,0.8);
    }
    .rating-section .rating-text-display {
        font-size: 1.2rem;
        color: #555;
        margin-top: 20px;
        font-weight: 500;
    }
    .rating-section textarea {
        width: 100%;
        min-height: 100px;
        border: 1px solid #ccc;
        border-radius: 8px;
        padding: 10px;
        margin-top: 15px;
        font-family: 'Tajawal', sans-serif;
        font-size: 1rem;
        resize: vertical;
    }

    /* Vote Section - New Design */
    .vote-section-container {
        background: #ffffff;
        padding: 30px;
        border-radius: 15px;
        margin-top: 30px;
        box-shadow: 0 8px 25px rgba(0,0,0,0.08);
        border: 1px solid #e0e0e0;
        text-align: center;
    }
    .vote-section-title {
        font-size: 1.8rem;
        font-weight: 800;
        color: #333;
        margin-bottom: 25px;
        position: relative;
        display: inline-block;
    }
    .vote-section-title::after {
        content: "";
        position: absolute;
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        width: 50px;
        height: 3px;
        background-color: #bdbdbd; /* Silver line */
        border-radius: 2px;
    }
    .vote-buttons-wrapper {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-bottom: 20px;
    }
    .vote-button.silver {
        background-color: #e0e0e0; /* Light silver */
        color: #333;
        border: 1px solid #bdbdbd; /* Darker silver border */
        padding: 12px 30px;
        border-radius: 30px;
        font-weight: bold;
        font-size: 1.1rem;
        transition: all 0.3s ease;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 10px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    .vote-button.silver:hover {
        background-color: #bdbdbd; /* Darker silver on hover */
        transform: translateY(-2px);
        box-shadow: 0 6px 15px rgba(0,0,0,0.15);
    }
    .vote-button.silver i {
        color: #616161; /* Dark grey icon */
    }
    .vote-button.silver#approve-btn i {
        color: #4CAF50; /* Green for approve icon */
    }
    .vote-button.silver#disapprove-btn i {
        color: #f44336; /* Red for disapprove icon */
    }
    .vote-count-number {
        font-size: 1.2rem;
        font-weight: bold;
    }
    .vote-stats {
        text-align: center;
        margin-top: 20px;
    }
    .vote-stats p {
        font-size: 1.1rem;
        color: #555;
        margin-bottom: 10px;
    }
    .progress-bar-container {
        width: 80%;
        margin: 0 auto;
        background-color: #e0e0e0;
        border-radius: 10px;
        overflow: hidden;
        height: 25px;
        display: flex;
    }
    .progress-bar-approve {
        background-color: #4CAF50;
        height: 100%;
        text-align: center;
        color: white;
        font-weight: bold;
        line-height: 25px;
        transition: width 0.5s ease-in-out;
    }
    .progress-bar-disapprove {
        background-color: #f44336;
        height: 100%;
        text-align: center;
        color: white;
        font-weight: bold;
        line-height: 25px;
        transition: width 0.5s ease-in-out;
    }

    /* Chat Button */
    .chat-button-container {
        text-align: center;
        margin-top: 40px;
        padding: 30px;
        background: linear-gradient(135deg, #e0e0e0 0%, #bdbdbd 100%);
        border-radius: 20px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }
    .btn-chat-new {
        background: linear-gradient(45deg, #9e9e9e 0%, #757575 100%);
        color: white;
        padding: 18px 50px;
        border-radius: 50px;
        font-weight: bold;
        font-size: 1.3rem;
        transition: all 0.4s ease;
        box-shadow: 0 8px 25px rgba(158, 158, 158, 0.4);
        display: inline-flex;
        align-items: center;
        gap: 12px;
        text-decoration: none;
        border: 3px solid rgba(255,255,255,0.2);
    }
    .btn-chat-new:hover {
        transform: translateY(-8px) scale(1.05);
        box-shadow: 0 15px 35px rgba(158, 158, 158, 0.6);
        background: linear-gradient(45deg, #757575 0%, #616161 100%);
        border-color: rgba(255,255,255,0.4);
    }
    .btn-chat-new i {
        font-size: 1.4rem;
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.1); }
        100% { transform: scale(1); }
    }

    /* Simple Electoral Program Section */
    .electoral-program-simple {
        background: white;
        border-radius: 15px;
        padding: 35px;
        margin-bottom: 30px;
        box-shadow: 0 8px 25px rgba(0,0,0,0.08);
        border: 1px solid #e0e0e0;
    }
    .electoral-program-simple h2 {
        font-size: 2.2rem;
        font-weight: 800;
        color: #4CAF50;
        margin-bottom: 25px;
        text-align: center;
        position: relative;
    }
    .electoral-program-simple p {
        color: #555;
        line-height: 1.8;
        font-size: 1.05rem;
        text-align: center;
        margin-bottom: 30px;
    }
    .promises-list-simple {
        list-style: none;
        padding: 0;
        margin: 0;
    }
    .promises-list-simple li {
        background: #f8f9fa;
        margin-bottom: 15px;
        padding: 20px;
        border-radius: 10px;
        border-left: 4px solid #4CAF50;
        position: relative;
        transition: all 0.3s ease;
    }
    .promises-list-simple li:hover {
        background: #e8f5e9;
        transform: translateX(-5px);
    }
    .promises-list-simple li::before {
        content: '\f00c';
        font-family: 'Font Awesome 5 Free';
        font-weight: 900;
        color: #4CAF50;
        position: absolute;
        right: 15px;
        top: 20px;
        font-size: 1.1rem;
    }
    .promises-list-simple li strong {
        color: #2c3e50;
        font-size: 1.1rem;
        display: block;
        margin-bottom: 5px;
        margin-right: 30px;
    }
    .promises-list-simple li span {
        color: #666;
        line-height: 1.6;
        margin-right: 30px;
        display: block;
    }

    /* Simple History Section */
    .history-simple {
        background: white;
        border-radius: 15px;
        padding: 35px;
        margin-bottom: 30px;
        box-shadow: 0 8px 25px rgba(0,0,0,0.08);
        border: 1px solid #e0e0e0;
    }
    .history-simple h2 {
        font-size: 2.2rem;
        font-weight: 800;
        color: #4CAF50;
        margin-bottom: 25px;
        text-align: center;
        position: relative;
    }
    .history-simple > p {
        color: #555;
        line-height: 1.8;
        font-size: 1.05rem;
        text-align: center;
        margin-bottom: 30px;
    }
    .history-list-simple {
        list-style: none;
        padding: 0;
        margin: 0;
    }
    .history-list-simple li {
        background: #f8f9fa;
        margin-bottom: 20px;
        padding: 25px;
        border-radius: 10px;
        border-right: 4px solid #6c757d;
        transition: all 0.3s ease;
    }
    .history-list-simple li:hover {
        background: #e9ecef;
        transform: translateX(5px);
    }
    .history-list-simple li strong {
        color: #4CAF50;
        font-size: 1.1rem;
        display: block;
        margin-bottom: 8px;
        font-weight: 700;
    }
    .history-list-simple li .position {
        color: #2c3e50;
        font-size: 1rem;
        font-weight: 600;
        display: block;
        margin-bottom: 8px;
    }
    .history-list-simple li .description {
        color: #666;
        line-height: 1.6;
        font-size: 0.95rem;
    }
    .history-simple .closing-text {
        text-align: center;
        margin-top: 25px;
        color: #6c757d;
        font-style: italic;
        font-size: 1rem;
    }
</style>
{% endblock %}

{% block content %}
<div class="profile-page-container">
    <!-- Profile Header Section -->
    <section class="profile-header">
        <img src="{% static 'naebak/images/Untitleddesign(1).png' %}" alt="صورة الغلاف" class="cover-image">
        <div class="profile-header-overlay"></div>
        <div class="profile-info-area">
            <img src="{% static 'naebak/images/a1.jpg' %}" alt="صورة المرشح" class="profile-photo-lg">
            <div class="candidate-details-header">
                <h1 class="candidate-name-header">المهندس أحمد محمد علي</h1>
                <p class="candidate-role-header">مرشح مجلس النواب - مهندس مدني</p>
                <p class="candidate-location-header">دائرة مصر الجديدة - القاهرة</p>
            </div>
        </div>
        <div class="header-actions-left">
            <div class="social-icons-header-left">
                <a href="#"><i class="fab fa-facebook-f"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
            </div>
            
            <a href="#" class="btn btn-support-banner-header" onclick="supportWithBanner()">
                <i class="fas fa-flag me-2"></i> ادعم بلافته
            </a>
            
            <a href="#" class="btn-join-team" onclick="joinTeam()">
                <i class="fas fa-users"></i> انضم للفريق
            </a>
            
            <a href="#" class="btn-chat-green" onclick="startChat()">
                <i class="fas fa-comments"></i> راسلنا
            </a>
        </div>
        </div>
    </section>

    <!-- Main Content Area -->
    <div class="profile-main-content">
        <div class="row">
            <div class="col-lg-8">
                <!-- Video Section -->
                <div class="content-card">
                    <div class="video-section">
                        <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" allowfullscreen></iframe>
                    </div>
                    <p>أهلي الكرام، أبناء دائرتي الأوفياء، صوتكم أمانة، ومستقبلنا يبنى بسواعدنا. معًا نحو غد أفضل، نستحق الأفضل.</p>
                </div>

                <!-- Vote Section -->
                <div class="content-card vote-section-container">
                    <div class="vote-buttons-wrapper">
                        <button class="vote-button silver" id="approve-btn" onclick="handleVote(\'approve\')">
                            <i class="fas fa-thumbs-up"></i> أؤيد <span id="approve-count" class="vote-count-number">1250</span>
                        </button>
                        <button class="vote-button silver" id="disapprove-btn" onclick="handleVote(\'disapprove\')">
                            <i class="fas fa-thumbs-down"></i> أعارض <span id="disapprove-count" class="vote-count-number">50</span>
                        </button>
                    </div>
                    <div class="vote-stats">
                        <p>إجمالي الأصوات: <span id="total-votes">1300</span></p>
                        <div class="progress-bar-container">
                            <div class="progress-bar-approve" id="progress-approve" style="width: 96.15%;">96.15%</div>
                            <div class="progress-bar-disapprove" id="progress-disapprove" style="width: 3.85%;">3.85%</div>
                        </div>
                    </div>
                </div>

                <!-- Electoral Program Section - Simple Design -->
                <div class="electoral-program-simple">
                    <h2>البرنامج الانتخابي</h2>
                    <p>يهدف البرنامج الانتخابي للمرشح المهندس أحمد محمد علي إلى تحقيق تنمية شاملة ومستدامة في دائرة مصر الجديدة، من خلال التركيز على عدة محاور رئيسية تخدم مصالح المواطنين وتلبي طموحاتهم.</p>
                    
                    <h3 style="color: #666; margin-bottom: 20px; font-size: 1.4rem;">أبرز الوعود الانتخابية:</h3>
                    
                    <ul class="promises-list-simple">
                        <li>
                            <strong>تطوير البنية التحتية</strong>
                            <span>العمل على تحسين شبكات الطرق والصرف الصحي والمياه، وتوفير إضاءة كافية للشوارع.</span>
                        </li>
                        
                        <li>
                            <strong>دعم التعليم والصحة</strong>
                            <span>الارتقاء بمستوى الخدمات التعليمية والصحية من خلال تحديث المدارس والمستشفيات وتوفير الكوادر اللازمة.</span>
                        </li>
                        
                        <li>
                            <strong>توفير فرص عمل</strong>
                            <span>تشجيع الاستثمار المحلي والأجنبي لخلق فرص عمل جديدة للشباب والخريجين.</span>
                        </li>
                        
                        <li>
                            <strong>تمكين الشباب والمرأة</strong>
                            <span>دعم المبادرات الشبابية والنسائية وتوفير برامج تدريب وتأهيل لزيادة مشاركتهم في المجتمع.</span>
                        </li>
                        
                        <li>
                            <strong>حماية البيئة</strong>
                            <span>تنفيذ مشاريع للحفاظ على البيئة وتقليل التلوث وزيادة المساحات الخضراء.</span>
                        </li>
                        
                        <li>
                            <strong>تعزيز الأمن المجتمعي</strong>
                            <span>التعاون مع الأجهزة الأمنية لضمان أمن وسلامة المواطنين ومكافحة الجريمة.</span>
                        </li>
                    </ul>
                </div>

                <!-- History in Public Service Section - Simple Design -->
                <div class="history-simple">
                    <h2>التاريخ في العمل العام</h2>
                    <p>يتمتع المهندس أحمد محمد علي بتاريخ طويل ومشرف في العمل العام وخدمة المجتمع، حيث شارك في العديد من المبادرات والأنشطة التي تهدف إلى تحسين جودة حياة المواطنين.</p>
                    
                    <ul class="history-list-simple">
                        <li>
                            <strong>2018-2022</strong>
                            <div class="position">عضو مجلس إدارة جمعية تنمية المجتمع المحلي</div>
                            <div class="description">عضو مجلس إدارة جمعية تنمية المجتمع المحلي بمصر الجديدة، حيث ساهم في إطلاق عدة مشاريع خدمية.</div>
                        </li>
                        
                        <li>
                            <strong>2015-2018</strong>
                            <div class="position">رئيس لجنة الخدمات في الحي</div>
                            <div class="description">رئيس لجنة الخدمات في الحي، وعمل على حل مشاكل الصرف الصحي والنظافة في عدة مناطق.</div>
                        </li>
                        
                        <li>
                            <strong>2010-2015</strong>
                            <div class="position">متطوع نشط في حملات التوعية الصحية والبيئية</div>
                            <div class="description">متطوع نشط في حملات التوعية الصحية والبيئية، وقاد مبادرات لتجميل الشوارع والحدائق.</div>
                        </li>
                        
                        <li>
                            <strong>2005-2010</strong>
                            <div class="position">عضو في نقابة المهندسين</div>
                            <div class="description">عضو في نقابة المهندسين، وشارك في لجان التخطيط العمراني وتقديم الاستشارات الهندسية للمشاريع العامة.</div>
                        </li>
                    </ul>
                    
                    <p class="closing-text">تاريخه الحافل بالعمل الجاد والمخلص يعكس التزامه بخدمة وطنه ومواطنيه.</p>
                </div>
            </div>

            <div class="col-lg-4">
                <!-- Rating Section -->
                <div class="content-card rating-section" id="rating-section">
                    <h2>رأيك يهمنا</h2>
                    <div class="stars">
                        <i class="far fa-star" data-value="1"></i>
                        <i class="far fa-star" data-value="2"></i>
                        <i class="far fa-star" data-value="3"></i>
                        <i class="far fa-star" data-value="4"></i>
                        <i class="far fa-star" data-value="5"></i>
                    </div>
                    <p class="rating-text-display">لم يتم التقييم بعد</p>
                    <textarea placeholder="اكتب رأيك هنا..." class="form-control"></textarea>
                </div>

                <!-- Events Section - New Design V3 -->
                <div class="content-card">
                    <div class="events-section-v3">
                        <div class="event-card-v3">
                            <div class="event-content-v3">
                                <div class="event-title-v3">مؤتمر جماهيري كبير</div>
                                <div class="event-meta-v3"><i class="fas fa-calendar-alt"></i> 25 أغسطس 2025</div>
                                <div class="event-meta-v3"><i class="fas fa-map-marker-alt"></i> قاعة المؤتمرات الكبرى، مدينة نصر</div>
                                <div class="countdown-timer-v3">
                                    <div class="countdown-item-v3">
                                        <span class="countdown-number">10</span>
                                        <span class="countdown-label">أيام</span>
                                    </div>
                                    <div class="countdown-item-v3">
                                        <span class="countdown-number">20</span>
                                        <span class="countdown-label">ساعات</span>
                                    </div>
                                    <div class="countdown-item-v3">
                                        <span class="countdown-number">13</span>
                                        <span class="countdown-label">دقائق</span>
                                    </div>
                                    <div class="countdown-item-v3">
                                        <span class="countdown-number">57</span>
                                        <span class="countdown-label">ثواني</span>
                                    </div>
                                </div>
                                <button class="btn-attend-v3" onclick="alert('تسجيل حضور!')">تسجيل حضور</button>
                            </div>
                        </div>
                        <div class="event-card-v3">
                            <div class="event-content-v3">
                                <div class="event-title-v3">لقاء مفتوح مع أهالي قرية الأمل</div>
                                <div class="event-meta-v3"><i class="fas fa-calendar-alt"></i> 1 سبتمبر 2025</div>
                                <div class="event-meta-v3"><i class="fas fa-map-marker-alt"></i> مركز شباب قرية الأمل، القليوبية</div>
                                <div class="countdown-timer-v3">
                                    <div class="countdown-item-v3">
                                        <span class="countdown-number">17</span>
                                        <span class="countdown-label">أيام</span>
                                    </div>
                                    <div class="countdown-item-v3">
                                        <span class="countdown-number">12</span>
                                        <span class="countdown-label">ساعات</span>
                                    </div>
                                    <div class="countdown-item-v3">
                                        <span class="countdown-number">13</span>
                                        <span class="countdown-label">دقائق</span>
                                    </div>
                                    <div class="countdown-item-v3">
                                        <span class="countdown-number">57</span>
                                        <span class="countdown-label">ثواني</span>
                                    </div>
                                </div>
                                <button class="btn-attend-v3" onclick="alert('تسجيل حضور!')">تسجيل حضور</button>
                            </div>
                        </div>
                        <div class="event-card-v3">
                            <div class="event-content-v3">
                                <div class="event-title-v3">ندوة تثقيفية عن حقوق المواطن</div>
                                <div class="event-meta-v3"><i class="fas fa-calendar-alt"></i> 10 سبتمبر 2025</div>
                                <div class="event-meta-v3"><i class="fas fa-map-marker-alt"></i> المركز الثقافي، حي الزيتون</div>
                                <div class="countdown-timer-v3">
                                    <div class="countdown-item-v3">
                                        <span class="countdown-number">26</span>
                                        <span class="countdown-label">أيام</span>
                                    </div>
                                    <div class="countdown-item-v3">
                                        <span class="countdown-number">19</span>
                                        <span class="countdown-label">ساعات</span>
                                    </div>
                                    <div class="countdown-item-v3">
                                        <span class="countdown-number">07</span>
                                        <span class="countdown-label">دقائق</span>
                                    </div>
                                    <div class="countdown-item-v3">
                                        <span class="countdown-number">29</span>
                                        <span class="countdown-label">ثواني</span>
                                    </div>
                                </div>
                                <button class="btn-attend-v3" onclick="alert('تسجيل حضور!')">تسجيل حضور</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block extra_js %}
<script>
    let userVote = null;

    function updateVoteDisplay() {
        const approveCountElement = document.getElementById('approve-count');
        const disapproveCountElement = document.getElementById('disapprove-count');
        const totalVotesElement = document.getElementById('total-votes');
        const progressApprove = document.getElementById('progress-approve');
        const progressDisapprove = document.getElementById('progress-disapprove');

        let approveCount = parseInt(approveCountElement.textContent);
        let disapproveCount = parseInt(disapproveCountElement.textContent);
        let totalVotes = approveCount + disapproveCount;

        totalVotesElement.textContent = totalVotes;

        let approvePercentage = totalVotes === 0 ? 0 : (approveCount / totalVotes) * 100;
        let disapprovePercentage = totalVotes === 0 ? 0 : (disapproveCount / totalVotes) * 100;

        progressApprove.style.width = `${approvePercentage}%`;
        progressApprove.textContent = `${approvePercentage.toFixed(2)}%`;
        progressDisapprove.style.width = `${disapprovePercentage}%`;
        progressDisapprove.textContent = `${disapprovePercentage.toFixed(2)}%`;

        if (approvePercentage < 10) progressApprove.textContent = '';
        if (disapprovePercentage < 10) progressDisapprove.textContent = '';
    }

    function handleVote(type) {
        const approveCountElement = document.getElementById('approve-count');
        const disapproveCountElement = document.getElementById('disapprove-count');

        let approveCount = parseInt(approveCountElement.textContent);
        let disapproveCount = parseInt(disapproveCountElement.textContent);

        if (userVote === type) {
            if (type === 'approve') {
                approveCount--;
            } else {
                disapproveCount--;
            }
            userVote = null;
            alert('تم إلغاء تصويتك.');
        } else {
            if (userVote === 'approve') {
                approveCount--;
            } else if (userVote === 'disapprove') {
                disapproveCount--;
            }

            if (type === 'approve') {
                approveCount++;
            } else {
                disapproveCount++;
            }
            userVote = type;
            alert(`تم تسجيل تصويتك بـ ${type === 'approve' ? 'تأييد' : 'معارضة'}.`);
        }

        approveCountElement.textContent = approveCount;
        disapproveCountElement.textContent = disapproveCount;
        updateVoteDisplay();
    }

    function startChat() {
        alert('سيتم فتح نافذة المحادثة مع المرشح. يمكنك رفع صور أو مستندات.');
    }

    function joinTeam() {
        alert('سيتم التواصل معك قريباً لتسجيل بياناتك والانضمام لفريق الدعاية للمرشح.');
    }

    function supportWithBanner() {
        alert('سيتم التواصل معك قريباً لترتيب اللافتة الدعائية.');
    }

    document.addEventListener('DOMContentLoaded', function() {
        const stars = document.querySelectorAll('.rating-section .stars i');
        const ratingText = document.querySelector('.rating-section .rating-text-display');
        let currentRating = 0;

        stars.forEach(star => {
            star.addEventListener('mouseover', function() {
                resetStars();
                const value = parseInt(this.dataset.value);
                highlightStars(value);
            });

            star.addEventListener('click', function() {
                currentRating = parseInt(this.dataset.value);
                ratingText.textContent = `لقد قمت بتقييم المرشح بـ ${currentRating} نجوم.`;
                stars.forEach((s, index) => {
                    if (index < currentRating) {
                        s.classList.add('selected', 'fas');
                        s.classList.remove('far');
                    } else {
                        s.classList.remove('selected', 'fas');
                        s.classList.add('far');
                    }
                });
                alert(`شكراً لتقييمك المرشح بـ ${currentRating} نجوم!`);
            });

            star.addEventListener('mouseout', function() {
                resetStars();
                highlightStars(currentRating);
            });
        });

        function highlightStars(value) {
            stars.forEach((star, index) => {
                if (index < value) {
                    star.classList.add('fas');
                    star.classList.remove('far');
                } else {
                    star.classList.remove('fas');
                    star.classList.add('far');
                }
            });
        }

        function resetStars() {
            stars.forEach(star => {
                star.classList.remove('fas');
                star.classList.add('far');
            });
        }

        // Countdown Timer Logic for V3 - Fixed
        function updateCountdownV3() {
            const eventCards = document.querySelectorAll('.event-card-v3');
            eventCards.forEach((card, index) => {
                // Define specific target dates for each event
                let targetDate;
                if (index === 0) {
                    // First event: August 25, 2025
                    targetDate = new Date('2025-08-25T18:00:00');
                } else if (index === 1) {
                    // Second event: September 1, 2025
                    targetDate = new Date('2025-09-01T18:00:00');
                } else if (index === 2) {
                    // Third event: September 10, 2025
                    targetDate = new Date('2025-09-10T18:00:00');
                } else {
                    // Default fallback
                    targetDate = new Date('2025-08-25T18:00:00');
                }

                const now = new Date().getTime();
                const distance = targetDate.getTime() - now;

                let days, hours, minutes, seconds;

                if (distance > 0) {
                    days = Math.floor(distance / (1000 * 60 * 60 * 24));
                    hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                    seconds = Math.floor((distance % (1000 * 60)) / 1000);
                } else {
                    days = hours = minutes = seconds = 0;
                }

                // Ensure values are not NaN
                days = isNaN(days) ? 0 : days;
                hours = isNaN(hours) ? 0 : hours;
                minutes = isNaN(minutes) ? 0 : minutes;
                seconds = isNaN(seconds) ? 0 : seconds;

                const countdownItems = card.querySelectorAll('.countdown-item-v3');
                if (countdownItems.length === 4) {
                    countdownItems[0].innerHTML = `${days}<span>أيام</span>`;
                    countdownItems[1].innerHTML = `${hours}<span>ساعات</span>`;
                    countdownItems[2].innerHTML = `${minutes}<span>دقائق</span>`;
                    countdownItems[3].innerHTML = `${seconds}<span>ثواني</span>`;
                }

                if (distance <= 0) {
                    const attendBtn = card.querySelector('.btn-attend-v3');
                    if (attendBtn) {
                        attendBtn.textContent = 'انتهى الحدث';
                        attendBtn.disabled = true;
                        attendBtn.style.backgroundColor = '#ccc';
                    }
                }
            });
        }

        updateCountdownV3();
        setInterval(updateCountdownV3, 1000);
    });
</script>
{% endblock %}

